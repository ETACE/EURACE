digraph state_graph {
	rankdir=TB;
	size="8,5;"
	layer_0 [shape=plaintext, label="layer 0"];
	layer_1 [shape=plaintext, label="layer 1"];
	layer_0 -> layer_1 [style=invis];
	layer_2 [shape=plaintext, label="layer 2"];
	layer_1 -> layer_2 [style=invis];
	layer_3 [shape=plaintext, label="layer 3"];
	layer_2 -> layer_3 [style=invis];
	layer_4 [shape=plaintext, label="layer 4"];
	layer_3 -> layer_4 [style=invis];
	layer_5 [shape=plaintext, label="layer 5"];
	layer_4 -> layer_5 [style=invis];
	
	/* States */
	Firm_04 [label = "04"]
	Firm_03 [label = "03"]
	Firm_02 [label = "02"]
	Firm_01 [label = "01"]
	Bank_06 [label = "06"]
	Bank_05 [label = "05"]
	Bank_04 [label = "04"]
	Bank_03 [label = "03"]
	Bank_02 [label = "02"]
	Bank_01 [label = "01"]
	Household_05 [label = "05"]
	Household_04 [label = "04"]
	Household_03 [label = "03"]
	Household_02 [label = "02"]
	Household_01 [label = "01"]
	Firm_Firm_ask_loan_01_02 [label = "Firm_ask_loan", shape = rect]
	Firm_Firm_get_loan_02_03 [label = "Firm_get_loan", shape = rect]
	Firm_Firm_pay_interest_installment_03_04 [label = "Firm_pay_interest_installment", shape = rect]
	Bank_Bank_decide_credit_conditions_01_02 [label = "Bank_decide_credit_conditions", shape = rect]
	Bank_Bank_receive_deposits_02_03 [label = "Bank_receive_deposits", shape = rect]
	Bank_Bank_return_deposits_03_04 [label = "Bank_return_deposits", shape = rect]
	Bank_Bank_receive_installment_04_05 [label = "Bank_receive_installment", shape = rect]
	Bank_Bank_give_loan_05_06 [label = "Bank_give_loan", shape = rect]
	Household_Household_put_money_01_02 [label = "Household_put_money", shape = rect]
	Household_Household_choose_bank_02_03 [label = "Household_choose_bank", shape = rect]
	Household_Household_withdraw_04_05 [label = "Household_withdraw", shape = rect]
	Household_Household_withdraw_request_03_04 [label = "Household_withdraw_request", shape = rect]
	
	/* Transitions */
	Firm_01 -> Firm_Firm_ask_loan_01_02;
	Firm_Firm_ask_loan_01_02 -> Firm_02;
	Firm_02 -> Firm_Firm_get_loan_02_03;
	Firm_Firm_get_loan_02_03 -> Firm_03;
	Firm_03 -> Firm_Firm_pay_interest_installment_03_04;
	Firm_Firm_pay_interest_installment_03_04 -> Firm_04;
	Bank_01 -> Bank_Bank_decide_credit_conditions_01_02;
	Bank_Bank_decide_credit_conditions_01_02 -> Bank_02;
	Bank_02 -> Bank_Bank_receive_deposits_02_03;
	Bank_Bank_receive_deposits_02_03 -> Bank_03;
	Bank_03 -> Bank_Bank_return_deposits_03_04;
	Bank_Bank_return_deposits_03_04 -> Bank_04;
	Bank_04 -> Bank_Bank_receive_installment_04_05;
	Bank_Bank_receive_installment_04_05 -> Bank_05;
	Bank_05 -> Bank_Bank_give_loan_05_06;
	Bank_Bank_give_loan_05_06 -> Bank_06;
	Household_01 -> Household_Household_put_money_01_02;
	Household_Household_put_money_01_02 -> Household_02;
	Household_02 -> Household_Household_choose_bank_02_03;
	Household_Household_choose_bank_02_03 -> Household_03;
	Household_04 -> Household_Household_withdraw_04_05;
	Household_Household_withdraw_04_05 -> Household_05;
	Household_03 -> Household_Household_withdraw_request_03_04;
	Household_Household_withdraw_request_03_04 -> Household_04;
	
	/* Communications */
	Bank_Bank_return_deposits_03_04 -> Household_Household_withdraw_04_05 [ label = "withdrawal_allowed" color="#00ff00" constraint=false];
	Firm_Firm_get_loan_02_03 -> Bank_Bank_give_loan_05_06 [ label = "loan_acceptance" color="#00ff00" constraint=false];
	Firm_Firm_pay_interest_installment_03_04 -> Bank_Bank_receive_installment_04_05 [ label = "bankruptcy" color="#00ff00" constraint=false];
	Firm_Firm_pay_interest_installment_03_04 -> Bank_Bank_receive_installment_04_05 [ label = "installment" color="#00ff00" constraint=false];
	Household_Household_withdraw_request_03_04 -> Bank_Bank_return_deposits_03_04 [ label = "money_withdraw_request" color="#00ff00" constraint=false];
	Household_Household_put_money_01_02 -> Bank_Bank_receive_deposits_02_03 [ label = "household_deposit" color="#00ff00" constraint=false];
	Firm_Firm_ask_loan_01_02 -> Bank_Bank_decide_credit_conditions_01_02 [ label = "loan_request" color="#00ff00" constraint=false];
	Bank_Bank_decide_credit_conditions_01_02 -> Firm_Firm_get_loan_02_03 [ label = "loan_conditions" color="#00ff00" constraint=false];
	{ rank=same; layer_0;  Firm_Firm_ask_loan_01_02;  Household_Household_put_money_01_02; }
	{ rank=same; layer_1;  Bank_Bank_decide_credit_conditions_01_02;  Household_Household_choose_bank_02_03; }
	{ rank=same; layer_2;  Firm_Firm_get_loan_02_03;  Bank_Bank_receive_deposits_02_03;  Household_Household_withdraw_request_03_04; }
	{ rank=same; layer_3;  Firm_Firm_pay_interest_installment_03_04;  Bank_Bank_return_deposits_03_04; }
	{ rank=same; layer_4;  Bank_Bank_receive_installment_04_05;  Household_Household_withdraw_04_05; }
	{ rank=same; layer_5;  Bank_Bank_give_loan_05_06; }
}