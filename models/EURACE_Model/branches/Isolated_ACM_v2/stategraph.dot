digraph state_graph {
	rankdir=TB;
	size="8,5;"
	layer_0 [shape=plaintext, label="layer 0"];
	layer_1 [shape=plaintext, label="layer 1"];
	layer_0 -> layer_1 [style=invis];
	layer_2 [shape=plaintext, label="layer 2"];
	layer_1 -> layer_2 [style=invis];
	layer_3 [shape=plaintext, label="layer 3"];
	layer_2 -> layer_3 [style=invis];
	layer_4 [shape=plaintext, label="layer 4"];
	layer_3 -> layer_4 [style=invis];
	layer_5 [shape=plaintext, label="layer 5"];
	layer_4 -> layer_5 [style=invis];
	layer_6 [shape=plaintext, label="layer 6"];
	layer_5 -> layer_6 [style=invis];
	layer_7 [shape=plaintext, label="layer 7"];
	layer_6 -> layer_7 [style=invis];
	layer_8 [shape=plaintext, label="layer 8"];
	layer_7 -> layer_8 [style=invis];
	layer_9 [shape=plaintext, label="layer 9"];
	layer_8 -> layer_9 [style=invis];
	layer_10 [shape=plaintext, label="layer 10"];
	layer_9 -> layer_10 [style=invis];
	layer_11 [shape=plaintext, label="layer 11"];
	layer_10 -> layer_11 [style=invis];
	layer_12 [shape=plaintext, label="layer 12"];
	layer_11 -> layer_12 [style=invis];
	layer_13 [shape=plaintext, label="layer 13"];
	layer_12 -> layer_13 [style=invis];
	layer_14 [shape=plaintext, label="layer 14"];
	layer_13 -> layer_14 [style=invis];
	layer_15 [shape=plaintext, label="layer 15"];
	layer_14 -> layer_15 [style=invis];
	layer_16 [shape=plaintext, label="layer 16"];
	layer_15 -> layer_16 [style=invis];
	layer_17 [shape=plaintext, label="layer 17"];
	layer_16 -> layer_17 [style=invis];
	layer_18 [shape=plaintext, label="layer 18"];
	layer_17 -> layer_18 [style=invis];
	
	/* States */
	Firm_Start_Firm_Labour_Role [label = "Start_Firm_Labour_Role"]
	Firm_Firm_financial_crisis_ok [label = "Firm_financial_crisis_ok"]
	Firm_Firm_not_in_bankruptcy_state_now_check_financial_crisis [label = "Firm_not_in_bankruptcy_state_now_check_financial_crisis"]
	Firm_end_Firm_cycle [label = "end_Firm_cycle"]
	Firm_end_Firm_dies [label = "end_Firm_dies"]
	Firm_0003 [label = "0003"]
	Firm_02 [label = "02"]
	Firm_Firm_bankruptcy_checked [label = "Firm_bankruptcy_checked"]
	Firm_End_Firm_Financial_Role [label = "End_Firm_Financial_Role"]
	Firm_004 [label = "004"]
	Firm_003 [label = "003"]
	Firm_002 [label = "002"]
	Firm_001 [label = "001"]
	Firm_f1 [label = "f1"]
	Firm_Firm_End_Credit_Role [label = "Firm_End_Credit_Role"]
	Firm_Firm_Credit_02 [label = "Firm_Credit_02"]
	Firm_Start_Firm_Credit_Role [label = "Start_Firm_Credit_Role"]
	Bank_end_Bank_cycle [label = "end_Bank_cycle"]
	Bank_Bank_05 [label = "Bank_05"]
	Bank_Bank_04 [label = "Bank_04"]
	Bank_Bank_03 [label = "Bank_03"]
	Bank_Bank_02 [label = "Bank_02"]
	Bank_Bank_start_credit_market_role [label = "Bank_start_credit_market_role"]
	Dummy_003 [label = "003"]
	Dummy_002 [label = "002"]
	Dummy_001 [label = "001"]
	Firm_Firm_ask_loan_Start_Firm_Credit_Role_Firm_Credit_02 [label = "Firm_ask_loan", shape = rect]
	Firm_Firm_get_loan_Firm_Credit_02_Firm_End_Credit_Role [label = "Firm_get_loan", shape = rect]
	Firm_Firm_compute_financial_payments_f1_001 [label = "Firm_compute_financial_payments", shape = rect]
	Firm_Firm_compute_income_statement_001_002 [label = "Firm_compute_income_statement", shape = rect]
	Firm_Firm_compute_dividends_002_003 [label = "Firm_compute_dividends", shape = rect]
	Firm_Firm_compute_total_financial_payments_003_004 [label = "Firm_compute_total_financial_payments", shape = rect]
	Firm_Firm_idle_End_Firm_Financial_Role_Firm_bankruptcy_checked [label = "Firm_idle", shape = rect]
	Firm_Firm_compute_balance_sheet_004_Firm_bankruptcy_checked [label = "Firm_compute_balance_sheet", shape = rect]
	Firm_Firm_compute_total_liquidity_needs_02_Start_Firm_Credit_Role [label = "Firm_compute_total_liquidity_needs", shape = rect]
	Firm_Firm_compute_and_send_stock_orders_Firm_End_Credit_Role_0003 [label = "Firm_compute_and_send_stock_orders", shape = rect]
	Firm_Firm_read_stock_transactions_0003_End_Firm_Financial_Role [label = "Firm_read_stock_transactions", shape = rect]
	Firm_Firm_check_financial_and_bankruptcy_state_End_Firm_Financial_Role_f1 [label = "Firm_check_financial_and_bankruptcy_state", shape = rect]
	Firm_Firm_in_bankruptcy_Firm_bankruptcy_checked_end_Firm_dies [label = "Firm_in_bankruptcy", shape = rect]
	Firm_Firm_generate_new_firm_end_Firm_dies_end_Firm_cycle [label = "Firm_generate_new_firm", shape = rect]
	Firm_Firm_not_in_bankruptcy_Firm_bankruptcy_checked_Firm_not_in_bankruptcy_state_now_check_financial_crisis [label = "Firm_not_in_bankruptcy", shape = rect]
	Firm_Firm_in_financial_crisis_function_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok [label = "Firm_in_financial_crisis_function", shape = rect]
	Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role [label = "Firm_execute_financial_payments_function", shape = rect]
	Firm_Firm_idle_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok [label = "Firm_idle", shape = rect]
	Firm_idle_Start_Firm_Credit_Role_Start_Firm_Labour_Role [label = "idle", shape = rect]
	Firm_idle_Firm_End_Credit_Role_Start_Firm_Labour_Role [label = "idle", shape = rect]
	Bank_Bank_decide_credit_conditions_Bank_start_credit_market_role_Bank_02 [label = "Bank_decide_credit_conditions", shape = rect]
	Bank_Bank_give_loan_Bank_02_Bank_03 [label = "Bank_give_loan", shape = rect]
	Bank_Bank_receive_installment_Bank_03_Bank_04 [label = "Bank_receive_installment", shape = rect]
	Bank_Bank_account_update_deposits_Bank_04_Bank_05 [label = "Bank_account_update_deposits", shape = rect]
	Bank_Bank_accounting_Bank_05_end_Bank_cycle [label = "Bank_accounting", shape = rect]
	Bank_Bank_idle_Bank_05_end_Bank_cycle [label = "Bank_idle", shape = rect]
	Dummy_Function_read_send_order_messages_001_002 [label = "Function_read_send_order_messages", shape = rect]
	Dummy_Function_read_send_bank_messages_002_003 [label = "Function_read_send_bank_messages", shape = rect]
	
	/* Transitions */
	Firm_Start_Firm_Credit_Role -> Firm_Firm_ask_loan_Start_Firm_Credit_Role_Firm_Credit_02 [ label = "a->external_financial_needs > 0.0"];
	Firm_Firm_ask_loan_Start_Firm_Credit_Role_Firm_Credit_02 -> Firm_Firm_Credit_02;
	Firm_Firm_Credit_02 -> Firm_Firm_get_loan_Firm_Credit_02_Firm_End_Credit_Role;
	Firm_Firm_get_loan_Firm_Credit_02_Firm_End_Credit_Role -> Firm_Firm_End_Credit_Role;
	Firm_f1 -> Firm_Firm_compute_financial_payments_f1_001;
	Firm_Firm_compute_financial_payments_f1_001 -> Firm_001;
	Firm_001 -> Firm_Firm_compute_income_statement_001_002;
	Firm_Firm_compute_income_statement_001_002 -> Firm_002;
	Firm_002 -> Firm_Firm_compute_dividends_002_003;
	Firm_Firm_compute_dividends_002_003 -> Firm_003;
	Firm_003 -> Firm_Firm_compute_total_financial_payments_003_004;
	Firm_Firm_compute_total_financial_payments_003_004 -> Firm_004;
	Firm_End_Firm_Financial_Role -> Firm_Firm_idle_End_Firm_Financial_Role_Firm_bankruptcy_checked [ label = "not ( Periodicity: monthly\nPhase: a->day_of_month_to_act )"];
	Firm_Firm_idle_End_Firm_Financial_Role_Firm_bankruptcy_checked -> Firm_Firm_bankruptcy_checked;
	Firm_004 -> Firm_Firm_compute_balance_sheet_004_Firm_bankruptcy_checked;
	Firm_Firm_compute_balance_sheet_004_Firm_bankruptcy_checked -> Firm_Firm_bankruptcy_checked;
	Firm_02 -> Firm_Firm_compute_total_liquidity_needs_02_Start_Firm_Credit_Role;
	Firm_Firm_compute_total_liquidity_needs_02_Start_Firm_Credit_Role -> Firm_Start_Firm_Credit_Role;
	Firm_Firm_End_Credit_Role -> Firm_Firm_compute_and_send_stock_orders_Firm_End_Credit_Role_0003 [ label = "a->external_financial_needs > 0.0"];
	Firm_Firm_compute_and_send_stock_orders_Firm_End_Credit_Role_0003 -> Firm_0003;
	Firm_0003 -> Firm_Firm_read_stock_transactions_0003_End_Firm_Financial_Role;
	Firm_Firm_read_stock_transactions_0003_End_Firm_Financial_Role -> Firm_End_Firm_Financial_Role;
	Firm_End_Firm_Financial_Role -> Firm_Firm_check_financial_and_bankruptcy_state_End_Firm_Financial_Role_f1 [ label = "Periodicity: monthly\nPhase: a->day_of_month_to_act"];
	Firm_Firm_check_financial_and_bankruptcy_state_End_Firm_Financial_Role_f1 -> Firm_f1;
	Firm_Firm_bankruptcy_checked -> Firm_Firm_in_bankruptcy_Firm_bankruptcy_checked_end_Firm_dies [ label = "a->bankruptcy_state == 1"];
	Firm_Firm_in_bankruptcy_Firm_bankruptcy_checked_end_Firm_dies -> Firm_end_Firm_dies;
	Firm_end_Firm_dies -> Firm_Firm_generate_new_firm_end_Firm_dies_end_Firm_cycle;
	Firm_Firm_generate_new_firm_end_Firm_dies_end_Firm_cycle -> Firm_end_Firm_cycle;
	Firm_Firm_bankruptcy_checked -> Firm_Firm_not_in_bankruptcy_Firm_bankruptcy_checked_Firm_not_in_bankruptcy_state_now_check_financial_crisis [ label = "a->bankruptcy_state == 0"];
	Firm_Firm_not_in_bankruptcy_Firm_bankruptcy_checked_Firm_not_in_bankruptcy_state_now_check_financial_crisis -> Firm_Firm_not_in_bankruptcy_state_now_check_financial_crisis;
	Firm_Firm_not_in_bankruptcy_state_now_check_financial_crisis -> Firm_Firm_in_financial_crisis_function_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok [ label = "a->financial_crisis_state == 1"];
	Firm_Firm_in_financial_crisis_function_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok -> Firm_Firm_financial_crisis_ok;
	Firm_Firm_financial_crisis_ok -> Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role;
	Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role -> Firm_Start_Firm_Labour_Role;
	Firm_Firm_not_in_bankruptcy_state_now_check_financial_crisis -> Firm_Firm_idle_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok [ label = "a->financial_crisis_state == 0"];
	Firm_Firm_idle_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok -> Firm_Firm_financial_crisis_ok;
	Firm_Start_Firm_Credit_Role -> Firm_idle_Start_Firm_Credit_Role_Start_Firm_Labour_Role [ label = "not ( a->external_financial_needs > 0.0 )"];
	Firm_idle_Start_Firm_Credit_Role_Start_Firm_Labour_Role -> Firm_Start_Firm_Labour_Role;
	Firm_Firm_End_Credit_Role -> Firm_idle_Firm_End_Credit_Role_Start_Firm_Labour_Role [ label = "not ( a->external_financial_needs > 0.0 )"];
	Firm_idle_Firm_End_Credit_Role_Start_Firm_Labour_Role -> Firm_Start_Firm_Labour_Role;
	Bank_Bank_start_credit_market_role -> Bank_Bank_decide_credit_conditions_Bank_start_credit_market_role_Bank_02;
	Bank_Bank_decide_credit_conditions_Bank_start_credit_market_role_Bank_02 -> Bank_Bank_02;
	Bank_Bank_02 -> Bank_Bank_give_loan_Bank_02_Bank_03;
	Bank_Bank_give_loan_Bank_02_Bank_03 -> Bank_Bank_03;
	Bank_Bank_03 -> Bank_Bank_receive_installment_Bank_03_Bank_04;
	Bank_Bank_receive_installment_Bank_03_Bank_04 -> Bank_Bank_04;
	Bank_Bank_04 -> Bank_Bank_account_update_deposits_Bank_04_Bank_05;
	Bank_Bank_account_update_deposits_Bank_04_Bank_05 -> Bank_Bank_05;
	Bank_Bank_05 -> Bank_Bank_accounting_Bank_05_end_Bank_cycle [ label = "Periodicity: monthly\nPhase: a->day_of_month_to_act"];
	Bank_Bank_accounting_Bank_05_end_Bank_cycle -> Bank_end_Bank_cycle;
	Bank_Bank_05 -> Bank_Bank_idle_Bank_05_end_Bank_cycle [ label = "not ( Periodicity: monthly\nPhase: a->day_of_month_to_act )"];
	Bank_Bank_idle_Bank_05_end_Bank_cycle -> Bank_end_Bank_cycle;
	Dummy_001 -> Dummy_Function_read_send_order_messages_001_002;
	Dummy_Function_read_send_order_messages_001_002 -> Dummy_002;
	Dummy_002 -> Dummy_Function_read_send_bank_messages_002_003;
	Dummy_Function_read_send_bank_messages_002_003 -> Dummy_003;
	
	/* Communications */
	Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role -> Dummy_Function_read_send_bank_messages_002_003 [ label = "dividend_per_share" color="#00ff00" constraint=false];
	Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role -> Dummy_Function_read_send_bank_messages_002_003 [ label = "tax_payment" color="#00ff00" constraint=false];
	Firm_Firm_compute_and_send_stock_orders_Firm_End_Credit_Role_0003 -> Dummy_Function_read_send_order_messages_001_002 [ label = "order" color="#00ff00" constraint=false];
	Dummy_Function_read_send_bank_messages_002_003 -> Bank_Bank_account_update_deposits_Bank_04_Bank_05 [ label = "bank_account_update" color="#00ff00" constraint=false];
	Firm_Firm_in_bankruptcy_Firm_bankruptcy_checked_end_Firm_dies -> Bank_Bank_receive_installment_Bank_03_Bank_04 [ label = "bankruptcy" color="#00ff00" constraint=false];
	Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role -> Bank_Bank_receive_installment_Bank_03_Bank_04 [ label = "installment" color="#00ff00" constraint=false];
	Firm_Firm_get_loan_Firm_Credit_02_Firm_End_Credit_Role -> Bank_Bank_give_loan_Bank_02_Bank_03 [ label = "loan_acceptance" color="#00ff00" constraint=false];
	Firm_Firm_ask_loan_Start_Firm_Credit_Role_Firm_Credit_02 -> Bank_Bank_decide_credit_conditions_Bank_start_credit_market_role_Bank_02 [ label = "loan_request" color="#00ff00" constraint=false];
	Dummy_Function_read_send_order_messages_001_002 -> Firm_Firm_read_stock_transactions_0003_End_Firm_Financial_Role [ label = "order_status" color="#00ff00" constraint=false];
	Dummy_Function_read_send_order_messages_001_002 -> Firm_Firm_compute_balance_sheet_004_Firm_bankruptcy_checked [ label = "current_mall_stock_info" color="#00ff00" constraint=false];
	Bank_Bank_decide_credit_conditions_Bank_start_credit_market_role_Bank_02 -> Firm_Firm_get_loan_Firm_Credit_02_Firm_End_Credit_Role [ label = "loan_conditions" color="#00ff00" constraint=false];
	{ rank=same; layer_0;  Firm_Firm_compute_total_liquidity_needs_02_Start_Firm_Credit_Role; }
	{ rank=same; layer_1;  Firm_Firm_ask_loan_Start_Firm_Credit_Role_Firm_Credit_02;  Firm_idle_Start_Firm_Credit_Role_Start_Firm_Labour_Role; }
	{ rank=same; layer_2;  Bank_Bank_decide_credit_conditions_Bank_start_credit_market_role_Bank_02; }
	{ rank=same; layer_3;  Firm_Firm_get_loan_Firm_Credit_02_Firm_End_Credit_Role; }
	{ rank=same; layer_4;  Firm_Firm_compute_and_send_stock_orders_Firm_End_Credit_Role_0003;  Firm_idle_Firm_End_Credit_Role_Start_Firm_Labour_Role;  Bank_Bank_give_loan_Bank_02_Bank_03; }
	{ rank=same; layer_5;  Dummy_Function_read_send_order_messages_001_002; }
	{ rank=same; layer_6;  Firm_Firm_read_stock_transactions_0003_End_Firm_Financial_Role; }
	{ rank=same; layer_7;  Firm_Firm_idle_End_Firm_Financial_Role_Firm_bankruptcy_checked;  Firm_Firm_check_financial_and_bankruptcy_state_End_Firm_Financial_Role_f1; }
	{ rank=same; layer_8;  Firm_Firm_compute_financial_payments_f1_001; }
	{ rank=same; layer_9;  Firm_Firm_compute_income_statement_001_002; }
	{ rank=same; layer_10;  Firm_Firm_compute_dividends_002_003; }
	{ rank=same; layer_11;  Firm_Firm_compute_total_financial_payments_003_004; }
	{ rank=same; layer_12;  Firm_Firm_compute_balance_sheet_004_Firm_bankruptcy_checked; }
	{ rank=same; layer_13;  Firm_Firm_in_bankruptcy_Firm_bankruptcy_checked_end_Firm_dies;  Firm_Firm_not_in_bankruptcy_Firm_bankruptcy_checked_Firm_not_in_bankruptcy_state_now_check_financial_crisis; }
	{ rank=same; layer_14;  Firm_Firm_generate_new_firm_end_Firm_dies_end_Firm_cycle;  Firm_Firm_in_financial_crisis_function_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok;  Firm_Firm_idle_Firm_not_in_bankruptcy_state_now_check_financial_crisis_Firm_financial_crisis_ok; }
	{ rank=same; layer_15;  Firm_Firm_execute_financial_payments_function_Firm_financial_crisis_ok_Start_Firm_Labour_Role; }
	{ rank=same; layer_16;  Bank_Bank_receive_installment_Bank_03_Bank_04;  Dummy_Function_read_send_bank_messages_002_003; }
	{ rank=same; layer_17;  Bank_Bank_account_update_deposits_Bank_04_Bank_05; }
	{ rank=same; layer_18;  Bank_Bank_accounting_Bank_05_end_Bank_cycle;  Bank_Bank_idle_Bank_05_end_Bank_cycle; }
}