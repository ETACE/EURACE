<?xml version="1.0" encoding="ISO-8859-1"?>

<xmachine_agent_model>
<name>Credit_Market</name>
<author>Eurace</author>
<date></date>

<environment>

<functions>
<file>Bank_Credit_Functions.c</file>
</functions>

<datatypes>
</datatypes>
</environment>

<xmachine>
<name>Firm</name>
<memory>
</memory>
<functions>

<function>
<name>Firm_apply_for_loans</name>
<current_state>20</current_state>
<next_state>21</next_state>
<condition>Firm_is_external_financial_needs</condition>
<output><messagetype>loan_request</messagetype></output>
</function>

<function>
<name>Firm_read_loan_offers_send_loan_acceptance</name>
<current_state>21</current_state>
<next_state>22</next_state>
<input><messagetype>loan_conditions</messagetype></input>
<output><messagetype>loan_acceptance</messagetype></output>
</function>

<function>
<name>Firm_idle</name>
<current_state>22</current_state>
<next_state>27</next_state>
<condition>Firm_no_external_financial_needs</condition>
</function>

</functions>
</xmachine>

<xmachine>
<name>Bank</name>
<memory>
<var><type>double_array</type><name>account</name></var>
<var><type>double</type><name>proposed_interest_rate</name></var>
<var><type>double</type><name>amount_credit_offer</name></var>
</memory>
<functions>

<function>
<name>Bank_read_loan_request_send_offers</name>
<current_state>start_Bank</current_state>
<next_state>01</next_state>
<input><messagetype>loan_request</messagetype></input>
<output><messagetype>loan_conditions</messagetype></output>
</function>

<function>
<name>Bank_read_interest_payments</name>
<current_state>01</current_state>
<next_state>02</next_state>
<input><messagetype>interest_payment</messagetype></input>
</function>

<function>
<name>Bank_read_debt_installment_payment</name>
<current_state>02</current_state>
<next_state>03</next_state>
<input><messagetype>debt_installment_payment</messagetype></input>
</function>

</functions>
</xmachine>



<messages>

<message>
<name>loan_request</name>
<note>Added by firm to demand credit</note>
<var><type>int</type><name>firm_id</name></var>
<var><type>int</type><name>bank_id</name></var>
<var><type>double</type><name>credit_amount</name></var>
<var><type>double</type><name>total_assets</name></var>
<var><type>double</type><name>total_debt</name></var>
<var><type>double</type><name>range</name></var>
<var><type>double</type><name>x</name></var>
<var><type>double</type><name>y</name></var>
<var><type>double</type><name>z</name></var>
</message>

<message>
<name>loan_conditions</name>
<note>Added by bank to offer credit</note>
<var><type>int</type><name>bank_id</name></var>
<var><type>int</type><name>firm_id</name></var>
<var><type>double</type><name>proposed_interest_rate</name></var>
<var><type>double</type><name>amount_credit_offer</name></var>
<var><type>double</type><name>range</name></var>
<var><type>double</type><name>x</name></var>
<var><type>double</type><name>y</name></var>
<var><type>double</type><name>z</name></var>
</message>

<message>
<name>loan_acceptance</name>
<note>Added by firm to demand credit</note>
<var><type>int</type><name>firm_id</name></var>
<var><type>int</type><name>bank_id</name></var>
<var><type>double</type><name>credit_amount_taken</name></var>
<var><type>double</type><name>range</name></var>
<var><type>double</type><name>x</name></var>
<var><type>double</type><name>y</name></var>
<var><type>double</type><name>z</name></var>
</message>

<message>
<name>interest_payment</name>
<note>Added by firm to pay interest on debt</note>
<var><type>int</type><name>firm_id</name></var>
<var><type>int</type><name>bank_id</name></var>
<var><type>double</type><name>interest_payment</name></var>
<var><type>double</type><name>range</name></var>
<var><type>double</type><name>x</name></var>
<var><type>double</type><name>y</name></var>
<var><type>double</type><name>z</name></var>
</message>

<message>
<name>debt_installment_payment</name>
<note>Added by firm to pay debt installments</note>
<var><type>int</type><name>firm_id</name></var>
<var><type>int</type><name>bank_id</name></var>
<var><type>double</type><name>debt_installment_payment</name></var>
<var><type>double</type><name>range</name></var>
<var><type>double</type><name>x</name></var>
<var><type>double</type><name>y</name></var>
<var><type>double</type><name>z</name></var>
</message>

</messages>


</xmachine_agent_model>
