
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE xmodel SYSTEM "http://eurace.cs.bilgi.edu.tr/XMML.dtd">
<xmodel version="2">

<name>Credit_Market</name>
<version>after-Genoa</version>
<description></description>

<environment>

<functionFiles>
<file>Bank_Credit_Functions_sander.c</file>
<file>Firm_Credit_Functions_Dummy.c</file>
</functionFiles>

<dataTypes>

<dataType>
<name>account</name>
<description>Used by households to hold shares</description>
<variables>
<variable><type>int</type><name>id</name><description></description></variable>
<variable><type>double</type><name>balance</name><description></description></variable>
</variables>
</dataType>

<dataType>
<name>credit_request</name>
<description>Used by households to hold shares</description>
<variables>
<variable><type>int</type><name>firm_id</name><description></description></variable>
<variable><type>double</type><name>credit_amount</name><description></description></variable>
<variable><type>double</type><name>proposed_interest_rate</name><description></description></variable>
<variable><type>double</type><name>total_assets</name><description></description></variable>
<variable><type>double</type><name>total_debt</name><description></description></variable>
<variable><type>double</type><name>prob_of_failure</name><description></description></variable>
</variables>
</dataType>

<dataType>
<name>outstanding_loans</name>
<description>Used by banks to record outstanding loans to firms</description>
<variables>
<variable><type>int</type><name>firm_id</name><description></description></variable>
<variable><type>double</type><name>total_amount</name><description></description></variable>
<variable><type>double</type><name>interest_rate</name><description></description></variable>
<variable><type>int</type><name>credit_id</name><description>The ith credit granted by the bank</description></variable>
</variables>
</dataType>

</dataTypes>



</environment>

<agents>

<xagent>
<name>Firm</name>
<description></description>

<memory>
<variable><type>int</type><name>bank_id</name><description></description></variable>
</memory>


<functions>

<function>
<name>Firm_apply_for_loans</name>
<description></description>
<currentState>Start_Firm_Credit_Role</currentState>
<nextState>21</nextState>
<condition><lhs><value>a.external_financial_needs</value></lhs><op>GT</op><rhs><value>0.0</value></rhs></condition>
<outputs>
<output><messageName>loan_request</messageName></output>
</outputs>
</function>

<function>
<name>Firm_read_loan_acceptance</name>
<description></description>
<currentState>21</currentState>
<nextState>End_Firm_Credit_Role</nextState>
<inputs>
<input><messageName>loan_acceptance</messageName>
<filter><lhs><value>a.id</value></lhs><op>EQ</op><rhs><value>m.firm_id</value></rhs></filter>
</input>
</inputs>
</function>

<function>
<name>Firm_idle</name>
<description></description>
<currentState>Start_Firm_Credit_Role</currentState>
<nextState>Firm_Finish_Finacial_Management</nextState>
<condition><not><lhs><value>a.external_financial_needs</value></lhs><op>GT</op><rhs><value>0.0</value></rhs></not></condition>
</function>

</functions>
</xagent>

<xagent>
<name>Bank</name>
<description></description>
<memory>
<variable><type>account_array</type><name>accounts</name><description></description></variable>
<variable><type>outstanding_loans_array</type><name>loans_outstanding</name><description></description></variable>
<variable><type>int</type><name>last_credit_id</name><description></description></variable>
<variable><type>double</type><name>amount_credit_offer</name><description></description></variable>
<variable><type>double</type><name>total_deposits</name><description></description></variable>
<variable><type>double</type><name>total_loan_supply</name><description></description></variable>
<variable><type>double</type><name>total_loan_demand</name><description></description></variable>
<variable><type>double</type><name>payment_account</name><description></description></variable>
</memory>
<functions>


<function>
<name>Bank_read_interest_payments</name>
<description></description>
<currentState>01</currentState>
<nextState>02</nextState>
<inputs>
<input><messageName>interest_payment</messageName></input>
</inputs>
</function>

<function>
<name>Bank_read_debt_installment_payments</name>
<description></description>
<currentState>02</currentState>
<nextState>03</nextState>
<inputs>
<input><messageName>debt_installment_payment</messageName></input>
</inputs>
</function>

<function>
<name>Bank_read_loan_request_send_acceptance</name>
<description></description>
<currentState>Start_Bank</currentState>
<nextState>01</nextState>
<inputs>
<input><messageName>loan_request</messageName></input>
</inputs>
<outputs>
<output><messageName>loan_acceptance</messageName></output>
</outputs>
</function>


<function>
<name>Bank_account_update_deposits</name>
<description></description>
<currentState>03</currentState>
<nextState>end_BANK</nextState>
<inputs>
<input><messageName>bank_account_update</messageName></input>
</inputs>
</function>



</functions>
</xagent>

</agents>


<messages>

<message>
<name>loan_request</name>
<description>Added by firm to demand credit</description>
<variables>
<variable><type>int</type><name>firm_id</name><description></description></variable>
<variable><type>int</type><name>region_id</name><description></description></variable>
<variable><type>int</type><name>bank_id</name><description></description></variable>
<variable><type>double</type><name>credit_amount</name><description></description></variable>
<variable><type>double</type><name>total_assets</name><description></description></variable>
<variable><type>double</type><name>total_debt</name><description></description></variable>
</variables>
</message>

<message>
<name>loan_acceptance</name>
<description>Added by bank if it accepts the credit request</description>
<variables>
<variable><type>int</type><name>firm_id</name><description></description></variable>
<variable><type>int</type><name>bank_id</name><description></description></variable>
<variable><type>int</type><name>credit_id</name><description></description></variable>
<variable><type>double</type><name>credit_amount_taken</name><description></description></variable>
<variable><type>double</type><name>interest_rate</name><description></description></variable>
</variables>
</message>

<message>
<name>interest_payment</name>
<description>Added by firm to pay interest on debt</description>
<variables>
<variable><type>int</type><name>firm_id</name><description></description></variable>
<variable><type>int</type><name>bank_id</name><description></description></variable>
<variable><type>double</type><name>interest_payment</name><description></description></variable>
</variables>
</message>

<message>
<name>debt_installment_payment</name>
<description>Added by firm to pay debt installments</description>
<variables>
<variable><type>int</type><name>firm_id</name><description></description></variable>
<variable><type>int</type><name>bank_id</name><description></description></variable>
<variable><type>int</type><name>credit_id</name><description></description></variable>
<variable><type>double</type><name>debt_installment_payment</name><description></description></variable>
</variables>
</message>

</messages>


</xmodel>
