\section{Execution}

Agents have a number of functions to perform. The order that these functions are run is defined by the states associated with each function.

Figure \ref{} depicts an example of how the states can link functions together. In the first case, the agent performs two functions during the iteration step. The current state and the next state determine the order of the functions. \emph{Function A} is followed by \emph{Function B} by simply assigning the current and next states to link the function chain together. Case 2, presents another scenario, where the \emph{Function A} is run twice during a simulation step. The same function can be run twice by linking if to different current and next states.

Figure

These order of states also determines the internal dependency between the functions. This is only true if only one agent is being discussed. But if there is a dependency between more than one agent, communication dependencies are generated. These are denoted by the messages being sent and read by other functions.


Figure

The communication dependency sets up a synchronisation point. This means that all agent As have to finish running their \emph{Function A} before they can start running the \emph{Function D} for agent B.

Using the X-machine methodology, the agents traverse through the states to run the defined functions. These functions are also the transition functions which are defined in the model XML file with the,

\begin{itemize}
\item current state: the current state of the agent
\item input: the inputs the function is expecting
\item m$_{pre}$: the conditions on memory of executing the function
\item name: the name of the function
\item m$_{post}$: the changes in the memory (i.e. the function code)
\item output: possible outputs of the function
\item next state: the next state to move the agent to
\end{itemize}

By producing an order of function execution, this also provides a way to manage the processing of agents. By providing a link to an
agent list for each possible agent state, agents can be moved between these agent
state lists until they reach an end state.

